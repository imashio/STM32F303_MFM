ARM GAS  /var/folders/v3/wysfpd052nz8jkbx04pk0ym80000gn/T//ccZQu7FP.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"u8x8_byte_4wire_hw_spi.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.u8x8_byte_4wire_hw_spi,"ax",%progbits
  18              		.align	1
  19              		.p2align 2,,3
  20              		.global	u8x8_byte_4wire_hw_spi
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	u8x8_byte_4wire_hw_spi:
  27              	.LFB123:
  28              		.file 1 "/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c"
   1:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** /*
   2:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c ****  * u8x8_byte_4wire_hw_spi.c
   3:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c ****  *
   4:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c ****  *  Created on: Feb 5, 2018
   5:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c ****  *      Author: imashio
   6:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c ****  */
   7:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 
   8:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** #include "stm32f3xx_hal.h"
   9:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** #include "spi.h"
  10:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** #include "u8g2.h"		// graphic display library
  11:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 
  12:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 
  13:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** uint8_t u8x8_byte_4wire_hw_spi(u8x8_t *u8x8, uint8_t msg, uint8_t arg_int, void *arg_ptr)
  14:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** {
  29              		.loc 1 14 0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 8
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              	.LVL0:
  34 0000 70B5     		push	{r4, r5, r6, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 16
  37              		.cfi_offset 4, -16
  38              		.cfi_offset 5, -12
  39              		.cfi_offset 6, -8
  40              		.cfi_offset 14, -4
  15:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 	uint8_t byte;
  16:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 	uint8_t *data;
  17:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 
  18:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 	switch(msg){
ARM GAS  /var/folders/v3/wysfpd052nz8jkbx04pk0ym80000gn/T//ccZQu7FP.s 			page 2


  41              		.loc 1 18 0
  42 0002 1739     		subs	r1, r1, #23
  43              	.LVL1:
  14:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 	uint8_t byte;
  44              		.loc 1 14 0
  45 0004 82B0     		sub	sp, sp, #8
  46              	.LCFI1:
  47              		.cfi_def_cfa_offset 24
  14:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 	uint8_t byte;
  48              		.loc 1 14 0
  49 0006 1C46     		mov	r4, r3
  50              		.loc 1 18 0
  51 0008 0929     		cmp	r1, #9
  52 000a 33D8     		bhi	.L12
  53 000c DFE801F0 		tbb	[pc, r1]
  54              	.LVL2:
  55              	.L4:
  56 0010 15       		.byte	(.L3-.L4)/2
  57 0011 2A       		.byte	(.L5-.L4)/2
  58 0012 0D       		.byte	(.L6-.L4)/2
  59 0013 32       		.byte	(.L12-.L4)/2
  60 0014 32       		.byte	(.L12-.L4)/2
  61 0015 32       		.byte	(.L12-.L4)/2
  62 0016 32       		.byte	(.L12-.L4)/2
  63 0017 32       		.byte	(.L12-.L4)/2
  64 0018 32       		.byte	(.L12-.L4)/2
  65 0019 05       		.byte	(.L7-.L4)/2
  66              		.p2align 1
  67              	.L7:
  19:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 
  20:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 		case U8X8_MSG_BYTE_SEND:
  21:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			data = (uint8_t *)arg_ptr;
  22:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			while( arg_int > 0 ){
  23:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 				byte = *data;
  24:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 				data++;
  25:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 				arg_int--;
  26:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 				HAL_SPI_Transmit(&hspi1, &byte, 1, 10);
  27:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			}
  28:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			break;
  29:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 
  30:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 		case U8X8_MSG_BYTE_START_TRANSFER:	 // set CS to 0
  31:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			HAL_GPIO_WritePin(GPIOB, GPIO_PIN_0, 0);
  32:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			break;
  33:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 
  34:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 		case U8X8_MSG_BYTE_END_TRANSFER:	 // set CS to 1
  35:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			HAL_GPIO_WritePin(GPIOB, GPIO_PIN_0, 1);
  36:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			break;
  37:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 
  38:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 		case U8X8_MSG_BYTE_SET_DC: // DC
  39:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			if (arg_int){
  68              		.loc 1 39 0
  69 001a 72BB     		cbnz	r2, .L18
  70              	.LVL3:
  71              	.L16:
  40:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 				HAL_GPIO_WritePin(GPIOB, GPIO_PIN_1, 1);
  72              		.loc 1 40 0
  73 001c 0221     		movs	r1, #2
ARM GAS  /var/folders/v3/wysfpd052nz8jkbx04pk0ym80000gn/T//ccZQu7FP.s 			page 3


  74 001e 1848     		ldr	r0, .L19
  75              	.LVL4:
  76 0020 FFF7FEFF 		bl	HAL_GPIO_WritePin
  77              	.LVL5:
  78              	.L15:
  41:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			}else{
  42:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 				HAL_GPIO_WritePin(GPIOB, GPIO_PIN_1, 0);
  43:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			}
  44:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** //			HAL_GPIO_WritePin(GPIOB, GPIO_PIN_1, arg_int);
  45:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			break;
  46:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 
  47:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 		default:
  48:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			return 0;
  49:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 
  50:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 	}
  51:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 	return 1;
  79              		.loc 1 51 0
  80 0024 0120     		movs	r0, #1
  52:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** }
  81              		.loc 1 52 0
  82 0026 02B0     		add	sp, sp, #8
  83              	.LCFI2:
  84              		.cfi_remember_state
  85              		.cfi_def_cfa_offset 16
  86              		@ sp needed
  87 0028 70BD     		pop	{r4, r5, r6, pc}
  88              	.LVL6:
  89              	.L6:
  90              	.LCFI3:
  91              		.cfi_restore_state
  35:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			break;
  92              		.loc 1 35 0
  93 002a 0122     		movs	r2, #1
  94              	.LVL7:
  95 002c 1146     		mov	r1, r2
  96 002e 1448     		ldr	r0, .L19
  97              	.LVL8:
  98 0030 FFF7FEFF 		bl	HAL_GPIO_WritePin
  99              	.LVL9:
  51:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** }
 100              		.loc 1 51 0
 101 0034 0120     		movs	r0, #1
 102              		.loc 1 52 0
 103 0036 02B0     		add	sp, sp, #8
 104              	.LCFI4:
 105              		.cfi_remember_state
 106              		.cfi_def_cfa_offset 16
 107              		@ sp needed
 108 0038 70BD     		pop	{r4, r5, r6, pc}
 109              	.LVL10:
 110              	.L3:
 111              	.LCFI5:
 112              		.cfi_restore_state
  22:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 				byte = *data;
 113              		.loc 1 22 0
 114 003a 002A     		cmp	r2, #0
 115 003c F2D0     		beq	.L15
ARM GAS  /var/folders/v3/wysfpd052nz8jkbx04pk0ym80000gn/T//ccZQu7FP.s 			page 4


 116 003e 551E     		subs	r5, r2, #1
 117 0040 EDB2     		uxtb	r5, r5
 118 0042 0135     		adds	r5, r5, #1
  26:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			}
 119              		.loc 1 26 0
 120 0044 0F4E     		ldr	r6, .L19+4
 121 0046 2544     		add	r5, r5, r4
 122              	.LVL11:
 123              	.L9:
  23:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 				data++;
 124              		.loc 1 23 0
 125 0048 14F8013B 		ldrb	r3, [r4], #1	@ zero_extendqisi2
 126              	.LVL12:
 127 004c 8DF80730 		strb	r3, [sp, #7]
 128              	.LVL13:
  26:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			}
 129              		.loc 1 26 0
 130 0050 0122     		movs	r2, #1
 131 0052 0A23     		movs	r3, #10
 132 0054 0DF10701 		add	r1, sp, #7
 133 0058 3046     		mov	r0, r6
 134 005a FFF7FEFF 		bl	HAL_SPI_Transmit
 135              	.LVL14:
  22:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 				byte = *data;
 136              		.loc 1 22 0
 137 005e A542     		cmp	r5, r4
 138 0060 F2D1     		bne	.L9
 139 0062 DFE7     		b	.L15
 140              	.LVL15:
 141              	.L5:
  31:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			break;
 142              		.loc 1 31 0
 143 0064 0022     		movs	r2, #0
 144              	.LVL16:
 145 0066 0121     		movs	r1, #1
 146 0068 0548     		ldr	r0, .L19
 147              	.LVL17:
 148 006a FFF7FEFF 		bl	HAL_GPIO_WritePin
 149              	.LVL18:
  51:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** }
 150              		.loc 1 51 0
 151 006e 0120     		movs	r0, #1
 152              		.loc 1 52 0
 153 0070 02B0     		add	sp, sp, #8
 154              	.LCFI6:
 155              		.cfi_remember_state
 156              		.cfi_def_cfa_offset 16
 157              		@ sp needed
 158 0072 70BD     		pop	{r4, r5, r6, pc}
 159              	.LVL19:
 160              	.L12:
 161              	.LCFI7:
 162              		.cfi_restore_state
  48:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 
 163              		.loc 1 48 0
 164 0074 0020     		movs	r0, #0
 165              	.LVL20:
ARM GAS  /var/folders/v3/wysfpd052nz8jkbx04pk0ym80000gn/T//ccZQu7FP.s 			page 5


 166              		.loc 1 52 0
 167 0076 02B0     		add	sp, sp, #8
 168              	.LCFI8:
 169              		.cfi_remember_state
 170              		.cfi_def_cfa_offset 16
 171              		@ sp needed
 172 0078 70BD     		pop	{r4, r5, r6, pc}
 173              	.LVL21:
 174              	.L18:
 175              	.LCFI9:
 176              		.cfi_restore_state
  40:/Users/imashio/Electronics/ARM/_Library/u8x8_byte_4wire_hw_spi.c **** 			}else{
 177              		.loc 1 40 0
 178 007a 0122     		movs	r2, #1
 179              	.LVL22:
 180 007c CEE7     		b	.L16
 181              	.L20:
 182 007e 00BF     		.align	2
 183              	.L19:
 184 0080 00040048 		.word	1207960576
 185 0084 00000000 		.word	hspi1
 186              		.cfi_endproc
 187              	.LFE123:
 189              		.text
 190              	.Letext0:
 191              		.file 2 "/usr/local/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/machine/_default_type
 192              		.file 3 "/usr/local/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/_stdint.h"
 193              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 194              		.file 5 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/system_stm32f3xx.h"
 195              		.file 6 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/stm32f303x8.h"
 196              		.file 7 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_def.h"
 197              		.file 8 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_dma.h"
 198              		.file 9 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_spi.h"
 199              		.file 10 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal.h"
 200              		.file 11 "Inc/spi.h"
 201              		.file 12 "/Users/imashio/Electronics/ARM/_Library/u8x8.h"
 202              		.file 13 "/Users/imashio/Electronics/ARM/_Library/u8g2.h"
 203              		.file 14 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_gpio.h"
ARM GAS  /var/folders/v3/wysfpd052nz8jkbx04pk0ym80000gn/T//ccZQu7FP.s 			page 6


DEFINED SYMBOLS
                            *ABS*:0000000000000000 u8x8_byte_4wire_hw_spi.c
/var/folders/v3/wysfpd052nz8jkbx04pk0ym80000gn/T//ccZQu7FP.s:18     .text.u8x8_byte_4wire_hw_spi:0000000000000000 $t
/var/folders/v3/wysfpd052nz8jkbx04pk0ym80000gn/T//ccZQu7FP.s:26     .text.u8x8_byte_4wire_hw_spi:0000000000000000 u8x8_byte_4wire_hw_spi
/var/folders/v3/wysfpd052nz8jkbx04pk0ym80000gn/T//ccZQu7FP.s:56     .text.u8x8_byte_4wire_hw_spi:0000000000000010 $d
/var/folders/v3/wysfpd052nz8jkbx04pk0ym80000gn/T//ccZQu7FP.s:66     .text.u8x8_byte_4wire_hw_spi:000000000000001a $t
/var/folders/v3/wysfpd052nz8jkbx04pk0ym80000gn/T//ccZQu7FP.s:184    .text.u8x8_byte_4wire_hw_spi:0000000000000080 $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_SPI_Transmit
hspi1
